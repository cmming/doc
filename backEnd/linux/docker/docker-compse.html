<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker Compose 使用指南 | chmi</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/doc/assets/css/0.styles.3e4528e6.css" as="style"><link rel="preload" href="/doc/assets/js/app.e9791119.js" as="script"><link rel="preload" href="/doc/assets/js/2.9984ddc4.js" as="script"><link rel="preload" href="/doc/assets/js/1.4894c54a.js" as="script"><link rel="preload" href="/doc/assets/js/37.ff59f6bc.js" as="script"><link rel="prefetch" href="/doc/assets/js/10.e64cabaf.js"><link rel="prefetch" href="/doc/assets/js/100.f7df002f.js"><link rel="prefetch" href="/doc/assets/js/101.d35576e4.js"><link rel="prefetch" href="/doc/assets/js/102.801bff79.js"><link rel="prefetch" href="/doc/assets/js/103.44a105d7.js"><link rel="prefetch" href="/doc/assets/js/104.7a11ad78.js"><link rel="prefetch" href="/doc/assets/js/105.ebf158b8.js"><link rel="prefetch" href="/doc/assets/js/106.62acc15b.js"><link rel="prefetch" href="/doc/assets/js/107.0335ac6e.js"><link rel="prefetch" href="/doc/assets/js/108.3df13500.js"><link rel="prefetch" href="/doc/assets/js/109.9d9dedbd.js"><link rel="prefetch" href="/doc/assets/js/11.97d1d428.js"><link rel="prefetch" href="/doc/assets/js/110.8c458b9e.js"><link rel="prefetch" href="/doc/assets/js/111.0cdddd42.js"><link rel="prefetch" href="/doc/assets/js/112.9602eae4.js"><link rel="prefetch" href="/doc/assets/js/113.24ae0da3.js"><link rel="prefetch" href="/doc/assets/js/114.055e4bfa.js"><link rel="prefetch" href="/doc/assets/js/115.bf42c7ce.js"><link rel="prefetch" href="/doc/assets/js/116.02e76485.js"><link rel="prefetch" href="/doc/assets/js/117.02d5349d.js"><link rel="prefetch" href="/doc/assets/js/118.2395b64f.js"><link rel="prefetch" href="/doc/assets/js/119.4647eaef.js"><link rel="prefetch" href="/doc/assets/js/12.429a7849.js"><link rel="prefetch" href="/doc/assets/js/120.29fec0a3.js"><link rel="prefetch" href="/doc/assets/js/121.70dc5297.js"><link rel="prefetch" href="/doc/assets/js/122.e36f561a.js"><link rel="prefetch" href="/doc/assets/js/123.b45c65f5.js"><link rel="prefetch" href="/doc/assets/js/124.61b24212.js"><link rel="prefetch" href="/doc/assets/js/125.a505e805.js"><link rel="prefetch" href="/doc/assets/js/126.2508f0ff.js"><link rel="prefetch" href="/doc/assets/js/127.baccc550.js"><link rel="prefetch" href="/doc/assets/js/128.5a904dd4.js"><link rel="prefetch" href="/doc/assets/js/129.421b6144.js"><link rel="prefetch" href="/doc/assets/js/13.d2ddedb0.js"><link rel="prefetch" href="/doc/assets/js/130.2f9875bb.js"><link rel="prefetch" href="/doc/assets/js/131.d6fe8bf3.js"><link rel="prefetch" href="/doc/assets/js/132.712f1ccd.js"><link rel="prefetch" href="/doc/assets/js/133.33245ee7.js"><link rel="prefetch" href="/doc/assets/js/134.6e4c639e.js"><link rel="prefetch" href="/doc/assets/js/135.abc73593.js"><link rel="prefetch" href="/doc/assets/js/136.a06a5898.js"><link rel="prefetch" href="/doc/assets/js/137.34fda939.js"><link rel="prefetch" href="/doc/assets/js/138.80872e22.js"><link rel="prefetch" href="/doc/assets/js/139.9a017865.js"><link rel="prefetch" href="/doc/assets/js/14.eced5267.js"><link rel="prefetch" href="/doc/assets/js/140.6dce18ab.js"><link rel="prefetch" href="/doc/assets/js/141.0dadea22.js"><link rel="prefetch" href="/doc/assets/js/142.9b1ab459.js"><link rel="prefetch" href="/doc/assets/js/143.2df61c45.js"><link rel="prefetch" href="/doc/assets/js/144.b04800d9.js"><link rel="prefetch" href="/doc/assets/js/145.391ba188.js"><link rel="prefetch" href="/doc/assets/js/146.933c96fd.js"><link rel="prefetch" href="/doc/assets/js/147.26cba66b.js"><link rel="prefetch" href="/doc/assets/js/148.01184dfd.js"><link rel="prefetch" href="/doc/assets/js/149.f4c2a9e1.js"><link rel="prefetch" href="/doc/assets/js/15.f503cdfb.js"><link rel="prefetch" href="/doc/assets/js/150.832f6f9f.js"><link rel="prefetch" href="/doc/assets/js/151.017b44f5.js"><link rel="prefetch" href="/doc/assets/js/152.e6e6f3f6.js"><link rel="prefetch" href="/doc/assets/js/153.ea9d07bc.js"><link rel="prefetch" href="/doc/assets/js/154.893c9f9e.js"><link rel="prefetch" href="/doc/assets/js/155.1822ff2a.js"><link rel="prefetch" href="/doc/assets/js/156.6be558d2.js"><link rel="prefetch" href="/doc/assets/js/157.9c36adf5.js"><link rel="prefetch" href="/doc/assets/js/158.fcc0f267.js"><link rel="prefetch" href="/doc/assets/js/159.eb6c07ff.js"><link rel="prefetch" href="/doc/assets/js/16.92b4b017.js"><link rel="prefetch" href="/doc/assets/js/160.64684e90.js"><link rel="prefetch" href="/doc/assets/js/161.1c019da5.js"><link rel="prefetch" href="/doc/assets/js/162.674fd786.js"><link rel="prefetch" href="/doc/assets/js/163.1f253589.js"><link rel="prefetch" href="/doc/assets/js/164.1c5cda57.js"><link rel="prefetch" href="/doc/assets/js/165.be57e069.js"><link rel="prefetch" href="/doc/assets/js/166.bc4dc3f8.js"><link rel="prefetch" href="/doc/assets/js/167.688a017b.js"><link rel="prefetch" href="/doc/assets/js/168.d0a54547.js"><link rel="prefetch" href="/doc/assets/js/169.d0d8503e.js"><link rel="prefetch" href="/doc/assets/js/17.9b14dbb8.js"><link rel="prefetch" href="/doc/assets/js/170.f9244417.js"><link rel="prefetch" href="/doc/assets/js/171.5dcb807c.js"><link rel="prefetch" href="/doc/assets/js/172.ef7c0100.js"><link rel="prefetch" href="/doc/assets/js/173.ee5fd627.js"><link rel="prefetch" href="/doc/assets/js/174.e98b1e68.js"><link rel="prefetch" href="/doc/assets/js/175.5f3463ee.js"><link rel="prefetch" href="/doc/assets/js/176.c17ff6a1.js"><link rel="prefetch" href="/doc/assets/js/177.73b84e6c.js"><link rel="prefetch" href="/doc/assets/js/178.3515685e.js"><link rel="prefetch" href="/doc/assets/js/179.ed97923f.js"><link rel="prefetch" href="/doc/assets/js/18.9ecfa5ea.js"><link rel="prefetch" href="/doc/assets/js/180.56c4cba3.js"><link rel="prefetch" href="/doc/assets/js/181.fb570576.js"><link rel="prefetch" href="/doc/assets/js/182.a0778325.js"><link rel="prefetch" href="/doc/assets/js/183.d45f33e0.js"><link rel="prefetch" href="/doc/assets/js/184.6c9f0d19.js"><link rel="prefetch" href="/doc/assets/js/185.46aa9f24.js"><link rel="prefetch" href="/doc/assets/js/186.6b23d3de.js"><link rel="prefetch" href="/doc/assets/js/187.95b78b10.js"><link rel="prefetch" href="/doc/assets/js/188.cbffaf1d.js"><link rel="prefetch" href="/doc/assets/js/189.a9c763ae.js"><link rel="prefetch" href="/doc/assets/js/19.512bc5e6.js"><link rel="prefetch" href="/doc/assets/js/190.c924cddf.js"><link rel="prefetch" href="/doc/assets/js/191.b0c6ef94.js"><link rel="prefetch" href="/doc/assets/js/192.16a7804e.js"><link rel="prefetch" href="/doc/assets/js/20.23e9d6c2.js"><link rel="prefetch" href="/doc/assets/js/21.d0f56493.js"><link rel="prefetch" href="/doc/assets/js/22.638e0da8.js"><link rel="prefetch" href="/doc/assets/js/23.048edccb.js"><link rel="prefetch" href="/doc/assets/js/24.7a953c6e.js"><link rel="prefetch" href="/doc/assets/js/25.7c48d1d9.js"><link rel="prefetch" href="/doc/assets/js/26.eab10eb6.js"><link rel="prefetch" href="/doc/assets/js/27.7ae1e23b.js"><link rel="prefetch" href="/doc/assets/js/28.1019e235.js"><link rel="prefetch" href="/doc/assets/js/29.fdcac620.js"><link rel="prefetch" href="/doc/assets/js/3.d3d16269.js"><link rel="prefetch" href="/doc/assets/js/30.9fed9a41.js"><link rel="prefetch" href="/doc/assets/js/31.95761f7a.js"><link rel="prefetch" href="/doc/assets/js/32.0cb8f8e8.js"><link rel="prefetch" href="/doc/assets/js/33.82a5b3e4.js"><link rel="prefetch" href="/doc/assets/js/34.6c3770b1.js"><link rel="prefetch" href="/doc/assets/js/35.6f3c3b87.js"><link rel="prefetch" href="/doc/assets/js/36.88ac4c17.js"><link rel="prefetch" href="/doc/assets/js/38.37f4cfaf.js"><link rel="prefetch" href="/doc/assets/js/39.28ef1e84.js"><link rel="prefetch" href="/doc/assets/js/4.a9eea2ab.js"><link rel="prefetch" href="/doc/assets/js/40.810dd8fd.js"><link rel="prefetch" href="/doc/assets/js/41.dec6c4db.js"><link rel="prefetch" href="/doc/assets/js/42.7fea9c4d.js"><link rel="prefetch" href="/doc/assets/js/43.a3007ecb.js"><link rel="prefetch" href="/doc/assets/js/44.c3916cf4.js"><link rel="prefetch" href="/doc/assets/js/45.9478de0c.js"><link rel="prefetch" href="/doc/assets/js/46.b268330b.js"><link rel="prefetch" href="/doc/assets/js/47.a3df4f01.js"><link rel="prefetch" href="/doc/assets/js/48.fe6ed53c.js"><link rel="prefetch" href="/doc/assets/js/49.7dcbd61a.js"><link rel="prefetch" href="/doc/assets/js/5.575f1112.js"><link rel="prefetch" href="/doc/assets/js/50.be9bb540.js"><link rel="prefetch" href="/doc/assets/js/51.fef7c14e.js"><link rel="prefetch" href="/doc/assets/js/52.159a83df.js"><link rel="prefetch" href="/doc/assets/js/53.e330ed7c.js"><link rel="prefetch" href="/doc/assets/js/54.dfc96984.js"><link rel="prefetch" href="/doc/assets/js/55.2d8d1eda.js"><link rel="prefetch" href="/doc/assets/js/56.768b335d.js"><link rel="prefetch" href="/doc/assets/js/57.961f4c80.js"><link rel="prefetch" href="/doc/assets/js/58.35f2f06d.js"><link rel="prefetch" href="/doc/assets/js/59.3bb0d20b.js"><link rel="prefetch" href="/doc/assets/js/6.4af81870.js"><link rel="prefetch" href="/doc/assets/js/60.7c61912f.js"><link rel="prefetch" href="/doc/assets/js/61.a18cb931.js"><link rel="prefetch" href="/doc/assets/js/62.ff800f97.js"><link rel="prefetch" href="/doc/assets/js/63.7135e337.js"><link rel="prefetch" href="/doc/assets/js/64.aab6d9da.js"><link rel="prefetch" href="/doc/assets/js/65.c5073b64.js"><link rel="prefetch" href="/doc/assets/js/66.5201f0e4.js"><link rel="prefetch" href="/doc/assets/js/67.489b7a5b.js"><link rel="prefetch" href="/doc/assets/js/68.d70ed0ca.js"><link rel="prefetch" href="/doc/assets/js/69.c8dfddef.js"><link rel="prefetch" href="/doc/assets/js/7.4729ec1c.js"><link rel="prefetch" href="/doc/assets/js/70.986e6289.js"><link rel="prefetch" href="/doc/assets/js/71.af473d5f.js"><link rel="prefetch" href="/doc/assets/js/72.0861cb4f.js"><link rel="prefetch" href="/doc/assets/js/73.e71927d6.js"><link rel="prefetch" href="/doc/assets/js/74.2d511199.js"><link rel="prefetch" href="/doc/assets/js/75.613a2e64.js"><link rel="prefetch" href="/doc/assets/js/76.761661f3.js"><link rel="prefetch" href="/doc/assets/js/77.6e250273.js"><link rel="prefetch" href="/doc/assets/js/78.d1030cc4.js"><link rel="prefetch" href="/doc/assets/js/79.e0a21bff.js"><link rel="prefetch" href="/doc/assets/js/80.de7ad888.js"><link rel="prefetch" href="/doc/assets/js/81.7bcaffe6.js"><link rel="prefetch" href="/doc/assets/js/82.3e33a142.js"><link rel="prefetch" href="/doc/assets/js/83.df6d5dd9.js"><link rel="prefetch" href="/doc/assets/js/84.87ca7056.js"><link rel="prefetch" href="/doc/assets/js/85.9f81bfb0.js"><link rel="prefetch" href="/doc/assets/js/86.8eee4710.js"><link rel="prefetch" href="/doc/assets/js/87.b9d04c8d.js"><link rel="prefetch" href="/doc/assets/js/88.be60c2b5.js"><link rel="prefetch" href="/doc/assets/js/89.98a77c20.js"><link rel="prefetch" href="/doc/assets/js/90.76253f05.js"><link rel="prefetch" href="/doc/assets/js/91.a0862ac7.js"><link rel="prefetch" href="/doc/assets/js/92.ce7afd75.js"><link rel="prefetch" href="/doc/assets/js/93.33356253.js"><link rel="prefetch" href="/doc/assets/js/94.875516e1.js"><link rel="prefetch" href="/doc/assets/js/95.3f5ed008.js"><link rel="prefetch" href="/doc/assets/js/96.ac1d4d27.js"><link rel="prefetch" href="/doc/assets/js/97.e4acbe31.js"><link rel="prefetch" href="/doc/assets/js/98.b6b8e26b.js"><link rel="prefetch" href="/doc/assets/js/99.7827bebe.js"><link rel="prefetch" href="/doc/assets/js/vendors~docsearch.82899547.js">
    <link rel="stylesheet" href="/doc/assets/css/0.styles.3e4528e6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/doc/" class="home-link router-link-active"><!----> <span class="site-name">chmi</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="博客" class="mobile-dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc/frontEnd/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/doc/typescript/chapter1/" class="nav-link">
  typescript
</a></li><li class="dropdown-item"><!----> <a href="/doc/java/" class="nav-link">
  java
</a></li><li class="dropdown-item"><!----> <a href="/doc/backEnd/php/" class="nav-link">
  php
</a></li><li class="dropdown-item"><!----> <a href="/doc/backEnd/linux/" class="nav-link router-link-active">
  linux
</a></li></ul></div></div><div class="nav-item"><a href="/doc/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/doc/thought/" class="nav-link">
  随笔
</a></div><div class="nav-item"><a href="/doc/reading/" class="nav-link">
  读书
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="博客" class="mobile-dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc/frontEnd/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/doc/typescript/chapter1/" class="nav-link">
  typescript
</a></li><li class="dropdown-item"><!----> <a href="/doc/java/" class="nav-link">
  java
</a></li><li class="dropdown-item"><!----> <a href="/doc/backEnd/php/" class="nav-link">
  php
</a></li><li class="dropdown-item"><!----> <a href="/doc/backEnd/linux/" class="nav-link router-link-active">
  linux
</a></li></ul></div></div><div class="nav-item"><a href="/doc/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/doc/thought/" class="nav-link">
  随笔
</a></div><div class="nav-item"><a href="/doc/reading/" class="nav-link">
  读书
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>docker</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/doc/backEnd/linux/docker/install.html" class="sidebar-link">安装</a></li><li><a href="/doc/backEnd/linux/docker/image.html" class="sidebar-link">镜像</a></li><li><a href="/doc/backEnd/linux/docker/build.html" class="sidebar-link">构建</a></li><li><a href="/doc/backEnd/linux/docker/container.html" class="sidebar-link">容器</a></li><li><a href="/doc/backEnd/linux/docker/docker-compse.html" aria-current="page" class="active sidebar-link">docker-compse</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#简介" class="sidebar-link">简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#主要特点" class="sidebar-link">主要特点</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#安装" class="sidebar-link">安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#linux-macos" class="sidebar-link">Linux/macOS</a></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#windows" class="sidebar-link">Windows</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#基本概念" class="sidebar-link">基本概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#docker-compose-yml-文件结构" class="sidebar-link">docker-compose.yml 文件结构</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#常用命令" class="sidebar-link">常用命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#基础命令" class="sidebar-link">基础命令</a></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#构建和重启" class="sidebar-link">构建和重启</a></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#日志和监控" class="sidebar-link">日志和监控</a></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#服务管理" class="sidebar-link">服务管理</a></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#信息查看" class="sidebar-link">信息查看</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#配置文件详解" class="sidebar-link">配置文件详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#服务配置" class="sidebar-link">服务配置</a></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#网络配置" class="sidebar-link">网络配置</a></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#数据卷配置" class="sidebar-link">数据卷配置</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#最佳实践" class="sidebar-link">最佳实践</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#_1-文件组织" class="sidebar-link">1. 文件组织</a></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#_2-环境变量管理" class="sidebar-link">2. 环境变量管理</a></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#_3-多环境配置" class="sidebar-link">3. 多环境配置</a></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#_4-数据持久化" class="sidebar-link">4. 数据持久化</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#实用示例" class="sidebar-link">实用示例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#web-应用-数据库" class="sidebar-link">Web 应用 + 数据库</a></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#微服务架构" class="sidebar-link">微服务架构</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#故障排除" class="sidebar-link">故障排除</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#常见问题" class="sidebar-link">常见问题</a></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#调试技巧" class="sidebar-link">调试技巧</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/backEnd/linux/docker/docker-compse.html#参考资源" class="sidebar-link">参考资源</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>k8s</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>harbor</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="docker-compose-使用指南"><a href="#docker-compose-使用指南" class="header-anchor">#</a> Docker Compose 使用指南</h1> <h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <p>Docker Compose 是一个用于定义和运行多容器 Docker 应用程序的工具。通过 Compose，您可以使用 YAML 文件来配置应用程序需要的所有服务。然后，使用一个命令，就可以从 YAML 文件配置中创建并启动所有服务。</p> <h3 id="主要特点"><a href="#主要特点" class="header-anchor">#</a> 主要特点</h3> <ul><li><strong>简化多容器应用管理</strong>：一次定义，多次运行</li> <li><strong>服务编排</strong>：定义服务之间的依赖关系</li> <li><strong>环境隔离</strong>：为不同环境使用不同的配置文件</li> <li><strong>数据卷管理</strong>：持久化数据存储</li> <li><strong>网络管理</strong>：服务间网络通信</li></ul> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <h3 id="linux-macos"><a href="#linux-macos" class="header-anchor">#</a> Linux/macOS</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 下载 Docker Compose</span>
<span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token string">&quot;https://github.com/docker/compose/releases/download/v2.20.0/docker-compose-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-s</span><span class="token variable">)</span></span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-m</span><span class="token variable">)</span></span>&quot;</span> <span class="token parameter variable">-o</span> /usr/local/bin/docker-compose

<span class="token comment"># 添加执行权限</span>
<span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/docker-compose

<span class="token comment"># 验证安装</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">--version</span>
</code></pre></div><h3 id="windows"><a href="#windows" class="header-anchor">#</a> Windows</h3> <p>Docker Desktop for Windows 已包含 Docker Compose</p> <h2 id="基本概念"><a href="#基本概念" class="header-anchor">#</a> 基本概念</h2> <h3 id="docker-compose-yml-文件结构"><a href="#docker-compose-yml-文件结构" class="header-anchor">#</a> docker-compose.yml 文件结构</h3> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> .
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;8000:8000&quot;</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> .<span class="token punctuation">:</span>/code
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> db
  <span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> postgres<span class="token punctuation">:</span><span class="token number">13</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">POSTGRES_PASSWORD</span><span class="token punctuation">:</span> password
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> postgres_data<span class="token punctuation">:</span>/var/lib/postgresql/data

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">postgres_data</span><span class="token punctuation">:</span>

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">default</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge
</code></pre></div><h2 id="常用命令"><a href="#常用命令" class="header-anchor">#</a> 常用命令</h2> <h3 id="基础命令"><a href="#基础命令" class="header-anchor">#</a> 基础命令</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 启动所有服务</span>
<span class="token function">docker-compose</span> up

<span class="token comment"># 后台启动</span>
<span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span>

<span class="token comment"># 启动指定服务</span>
<span class="token function">docker-compose</span> up web

<span class="token comment"># 停止所有服务</span>
<span class="token function">docker-compose</span> stop

<span class="token comment"># 停止指定服务</span>
<span class="token function">docker-compose</span> stop web

<span class="token comment"># 停止并删除容器、网络、卷</span>
<span class="token function">docker-compose</span> down

<span class="token comment"># 停止并删除所有内容（包括卷）</span>
<span class="token function">docker-compose</span> down <span class="token parameter variable">-v</span>
</code></pre></div><h3 id="构建和重启"><a href="#构建和重启" class="header-anchor">#</a> 构建和重启</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 重新构建镜像</span>
<span class="token function">docker-compose</span> build

<span class="token comment"># 重新构建指定服务</span>
<span class="token function">docker-compose</span> build web

<span class="token comment"># 强制重新构建（不使用缓存）</span>
<span class="token function">docker-compose</span> build --no-cache

<span class="token comment"># 重新构建并启动</span>
<span class="token function">docker-compose</span> up <span class="token parameter variable">--build</span>

<span class="token comment"># 重新构建指定服务并重启</span>
<span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span> web <span class="token parameter variable">--build</span>
</code></pre></div><h3 id="日志和监控"><a href="#日志和监控" class="header-anchor">#</a> 日志和监控</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 查看所有服务日志</span>
<span class="token function">docker-compose</span> logs

<span class="token comment"># 查看指定服务日志</span>
<span class="token function">docker-compose</span> logs web

<span class="token comment"># 实时查看日志</span>
<span class="token function">docker-compose</span> logs <span class="token parameter variable">-f</span>

<span class="token comment"># 查看最近N行日志</span>
<span class="token function">docker-compose</span> logs <span class="token parameter variable">--tail</span><span class="token operator">=</span><span class="token number">50</span>

<span class="token comment"># 查看运行的容器</span>
<span class="token function">docker-compose</span> <span class="token function">ps</span>

<span class="token comment"># 查看详细状态</span>
<span class="token function">docker-compose</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span>
</code></pre></div><h3 id="服务管理"><a href="#服务管理" class="header-anchor">#</a> 服务管理</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 重启服务</span>
<span class="token function">docker-compose</span> restart

<span class="token comment"># 重启指定服务</span>
<span class="token function">docker-compose</span> restart web

<span class="token comment"># 暂停服务</span>
<span class="token function">docker-compose</span> pause

<span class="token comment"># 恢复暂停的服务</span>
<span class="token function">docker-compose</span> unpause

<span class="token comment"># 扩展服务实例</span>
<span class="token function">docker-compose</span> up <span class="token parameter variable">--scale</span> <span class="token assign-left variable">web</span><span class="token operator">=</span><span class="token number">3</span>
</code></pre></div><h3 id="信息查看"><a href="#信息查看" class="header-anchor">#</a> 信息查看</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 查看配置</span>
<span class="token function">docker-compose</span> config

<span class="token comment"># 验证配置文件</span>
<span class="token function">docker-compose</span> config <span class="token parameter variable">--quiet</span>

<span class="token comment"># 查看镜像</span>
<span class="token function">docker-compose</span> images

<span class="token comment"># 查看版本</span>
<span class="token function">docker-compose</span> version

<span class="token comment"># 查看帮助</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">--help</span>
</code></pre></div><h2 id="配置文件详解"><a href="#配置文件详解" class="header-anchor">#</a> 配置文件详解</h2> <h3 id="服务配置"><a href="#服务配置" class="header-anchor">#</a> 服务配置</h3> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token comment"># 使用 Dockerfile 构建</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span> .
      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> Dockerfile
      <span class="token key atrule">args</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> ENV=production
    
    <span class="token comment"># 或使用现有镜像</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>alpine
    
    <span class="token comment"># 端口映射</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;80:80&quot;</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;443:443&quot;</span>
    
    <span class="token comment"># 环境变量</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> NODE_ENV=production
      <span class="token punctuation">-</span> API_URL=http<span class="token punctuation">:</span>//api<span class="token punctuation">:</span><span class="token number">3000</span>
    
    <span class="token comment"># 或使用环境文件</span>
    <span class="token key atrule">env_file</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> .env
    
    <span class="token comment"># 数据卷</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./src<span class="token punctuation">:</span>/app/src
      <span class="token punctuation">-</span> node_modules<span class="token punctuation">:</span>/app/node_modules
    
    <span class="token comment"># 网络</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> frontend
      <span class="token punctuation">-</span> backend
    
    <span class="token comment"># 依赖关系</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> db
      <span class="token punctuation">-</span> redis
    
    <span class="token comment"># 重启策略</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
    
    <span class="token comment"># 容器名称</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> my_web_app
    
    <span class="token comment"># 命令覆盖</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;npm&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;start&quot;</span><span class="token punctuation">]</span>
    
    <span class="token comment"># 工作目录</span>
    <span class="token key atrule">working_dir</span><span class="token punctuation">:</span> /app
    
    <span class="token comment"># 健康检查</span>
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;CMD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;curl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-f&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://localhost:80&quot;</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>
</code></pre></div><h3 id="网络配置"><a href="#网络配置" class="header-anchor">#</a> 网络配置</h3> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">frontend</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge
  <span class="token key atrule">backend</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge
    <span class="token key atrule">internal</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">custom</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge
    <span class="token key atrule">ipam</span><span class="token punctuation">:</span>
      <span class="token key atrule">config</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">subnet</span><span class="token punctuation">:</span> 172.20.0.0/16
</code></pre></div><h3 id="数据卷配置"><a href="#数据卷配置" class="header-anchor">#</a> 数据卷配置</h3> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token comment"># 命名卷</span>
  <span class="token key atrule">postgres_data</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local
  
  <span class="token comment"># 外部卷</span>
  <span class="token key atrule">external_data</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre></div><h2 id="最佳实践"><a href="#最佳实践" class="header-anchor">#</a> 最佳实践</h2> <h3 id="_1-文件组织"><a href="#_1-文件组织" class="header-anchor">#</a> 1. 文件组织</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>project/
├── docker-compose.yml          <span class="token comment"># 基础配置</span>
├── docker-compose.override.yml <span class="token comment"># 开发环境覆盖</span>
├── docker-compose.prod.yml     <span class="token comment"># 生产环境配置</span>
├── .env                        <span class="token comment"># 环境变量</span>
└── services/
    ├── web/
    │   └── Dockerfile
    └── api/
        └── Dockerfile
</code></pre></div><h3 id="_2-环境变量管理"><a href="#_2-环境变量管理" class="header-anchor">#</a> 2. 环境变量管理</h3> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># docker-compose.yml</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>$<span class="token punctuation">{</span>NGINX_VERSION<span class="token punctuation">:</span><span class="token punctuation">-</span>alpine<span class="token punctuation">}</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> API_URL=$<span class="token punctuation">{</span>API_URL<span class="token punctuation">}</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;${WEB_PORT:-80}:80&quot;</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># .env 文件</span>
<span class="token assign-left variable">NGINX_VERSION</span><span class="token operator">=</span><span class="token number">1.21</span>-alpine
<span class="token assign-left variable">API_URL</span><span class="token operator">=</span>http://localhost:3000
<span class="token assign-left variable">WEB_PORT</span><span class="token operator">=</span><span class="token number">8080</span>
</code></pre></div><h3 id="_3-多环境配置"><a href="#_3-多环境配置" class="header-anchor">#</a> 3. 多环境配置</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 开发环境</span>
<span class="token function">docker-compose</span> up

<span class="token comment"># 生产环境</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> docker-compose.yml <span class="token parameter variable">-f</span> docker-compose.prod.yml up <span class="token parameter variable">-d</span>

<span class="token comment"># 测试环境</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> docker-compose.yml <span class="token parameter variable">-f</span> docker-compose.test.yml up
</code></pre></div><h3 id="_4-数据持久化"><a href="#_4-数据持久化" class="header-anchor">#</a> 4. 数据持久化</h3> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> postgres<span class="token punctuation">:</span><span class="token number">13</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token comment"># 数据持久化</span>
      <span class="token punctuation">-</span> postgres_data<span class="token punctuation">:</span>/var/lib/postgresql/data
      <span class="token comment"># 初始化脚本</span>
      <span class="token punctuation">-</span> ./init.sql<span class="token punctuation">:</span>/docker<span class="token punctuation">-</span>entrypoint<span class="token punctuation">-</span>initdb.d/init.sql<span class="token punctuation">:</span>ro

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">postgres_data</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local
</code></pre></div><h2 id="实用示例"><a href="#实用示例" class="header-anchor">#</a> 实用示例</h2> <h3 id="web-应用-数据库"><a href="#web-应用-数据库" class="header-anchor">#</a> Web 应用 + 数据库</h3> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> .
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;3000:3000&quot;</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> DATABASE_URL=postgres<span class="token punctuation">:</span>//user<span class="token punctuation">:</span>password@db<span class="token punctuation">:</span>5432/myapp
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> db
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> .<span class="token punctuation">:</span>/app
      <span class="token punctuation">-</span> /app/node_modules

  <span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> postgres<span class="token punctuation">:</span><span class="token number">13</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">POSTGRES_USER</span><span class="token punctuation">:</span> user
      <span class="token key atrule">POSTGRES_PASSWORD</span><span class="token punctuation">:</span> password
      <span class="token key atrule">POSTGRES_DB</span><span class="token punctuation">:</span> myapp
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> postgres_data<span class="token punctuation">:</span>/var/lib/postgresql/data
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;5432:5432&quot;</span>

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">postgres_data</span><span class="token punctuation">:</span>
</code></pre></div><h3 id="微服务架构"><a href="#微服务架构" class="header-anchor">#</a> 微服务架构</h3> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">nginx</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>alpine
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;80:80&quot;</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./nginx.conf<span class="token punctuation">:</span>/etc/nginx/nginx.conf
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> api
      <span class="token punctuation">-</span> web

  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./frontend
    <span class="token key atrule">expose</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;3000&quot;</span>

  <span class="token key atrule">api</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./backend
    <span class="token key atrule">expose</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;8000&quot;</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> DATABASE_URL=postgres<span class="token punctuation">:</span>//user<span class="token punctuation">:</span>password@db<span class="token punctuation">:</span>5432/api
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> db
      <span class="token punctuation">-</span> redis

  <span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> postgres<span class="token punctuation">:</span><span class="token number">13</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">POSTGRES_USER</span><span class="token punctuation">:</span> user
      <span class="token key atrule">POSTGRES_PASSWORD</span><span class="token punctuation">:</span> password
      <span class="token key atrule">POSTGRES_DB</span><span class="token punctuation">:</span> api
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> postgres_data<span class="token punctuation">:</span>/var/lib/postgresql/data

  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">:</span>alpine
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> redis_data<span class="token punctuation">:</span>/data

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">postgres_data</span><span class="token punctuation">:</span>
  <span class="token key atrule">redis_data</span><span class="token punctuation">:</span>
</code></pre></div><h2 id="故障排除"><a href="#故障排除" class="header-anchor">#</a> 故障排除</h2> <h3 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h3> <ol><li><p><strong>端口冲突</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 查看端口占用</span>
<span class="token function">docker-compose</span> <span class="token function">ps</span>
<span class="token function">netstat</span> <span class="token parameter variable">-tulpn</span> <span class="token operator">|</span> <span class="token function">grep</span> :8080
</code></pre></div></li> <li><p><strong>容器无法启动</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 查看详细日志</span>
<span class="token function">docker-compose</span> logs service_name

<span class="token comment"># 检查配置</span>
<span class="token function">docker-compose</span> config
</code></pre></div></li> <li><p><strong>网络连接问题</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 查看网络</span>
<span class="token function">docker</span> network <span class="token function">ls</span>
<span class="token function">docker</span> network inspect project_default
</code></pre></div></li> <li><p><strong>数据卷问题</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 查看卷</span>
<span class="token function">docker</span> volume <span class="token function">ls</span>
<span class="token function">docker</span> volume inspect project_postgres_data
</code></pre></div></li></ol> <h3 id="调试技巧"><a href="#调试技巧" class="header-anchor">#</a> 调试技巧</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 进入运行中的容器</span>
<span class="token function">docker-compose</span> <span class="token builtin class-name">exec</span> web <span class="token function">bash</span>

<span class="token comment"># 运行一次性命令</span>
<span class="token function">docker-compose</span> run web <span class="token function">npm</span> <span class="token function">install</span>

<span class="token comment"># 查看服务配置</span>
<span class="token function">docker-compose</span> config web

<span class="token comment"># 验证文件语法</span>
<span class="token function">docker-compose</span> config <span class="token parameter variable">--quiet</span>
</code></pre></div><h2 id="参考资源"><a href="#参考资源" class="header-anchor">#</a> 参考资源</h2> <ul><li><a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">Docker Compose 官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.docker.com/compose/compose-file/" target="_blank" rel="noopener noreferrer">Compose 文件格式参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/docker/compose" target="_blank" rel="noopener noreferrer">Docker Compose GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">9/30/2025, 8:43:22 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/doc/backEnd/linux/docker/container.html" class="prev">
        容器
      </a></span> <span class="next"><a href="/doc/backEnd/linux/k8s/install.html">
        安装
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/doc/assets/js/app.e9791119.js" defer></script><script src="/doc/assets/js/2.9984ddc4.js" defer></script><script src="/doc/assets/js/1.4894c54a.js" defer></script><script src="/doc/assets/js/37.ff59f6bc.js" defer></script>
  </body>
</html>
